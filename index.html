<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fund Portfolio Holding Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        /* Custom Tailwind Configuration */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        indigo: {
                            950: '#1e1b4b',
                            900: '#312e81',
                            800: '#3730a3',
                            700: '#4338ca',
                            200: '#c7d2fe',
                            100: '#e0e7ff',
                            50: '#eef2ff',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        /* Custom Gradient Header */
        .header-gradient {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
        }
        
        /* Tabulator Custom Styling */
        .tabulator {
            font-family: inherit;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            background-color: #ffffff;
        }
        
        .tabulator .tabulator-header {
            background-color: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .tabulator .tabulator-header .tabulator-col {
            background-color: #ffffff;
            border-right: 1px solid #e5e7eb;
            white-space: normal;
            word-wrap: break-word;
            text-align: center;
            vertical-align: middle;
            min-height: 60px;
            height: auto;
        }
        
        .tabulator .tabulator-header .tabulator-col:hover {
            background-color: #f8fafc;
        }
        
        .tabulator .tabulator-header .tabulator-col .tabulator-col-title {
            white-space: normal;
            word-wrap: break-word;
            line-height: 1.3;
            padding: 0.75rem 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 45px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .tabulator .tabulator-header .tabulator-col .tabulator-header-filter {
            margin-top: 0.25rem;
        }
        
        
        .tabulator .tabulator-row {
            border-bottom: 1px solid #f3f4f6;
        }
        
        .tabulator .tabulator-row:hover {
            background-color: #f1f5f9;
        }

        .tabulator .tabulator-cell {
            border-right: 1px solid #e2e8f0;
            padding: 0.25rem 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.2;
        }
        
        .tabulator .tabulator-row {
            background-color: #ffffff !important;
            height: 35px;
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .tabulator {
                font-size: 0.875rem;
            }
            
            .tabulator .tabulator-header .tabulator-col {
                padding: 0.25rem 0.125rem;
            }
            
            .tabulator .tabulator-header .tabulator-col .tabulator-col-title {
                font-size: 0.75rem;
                padding: 0.25rem 0.125rem;
            }
            
            .tabulator .tabulator-row .tabulator-cell {
                padding: 0.25rem 0.125rem;
                font-size: 0.75rem;
            }
            
            .tabulator .tabulator-header .tabulator-col .tabulator-header-filter input {
                font-size: 0.625rem;
                padding: 0.125rem 0.25rem;
                width: 100%;
                border: 1px solid #d1d5db;
                border-radius: 0.25rem;
                background-color: white;
            }

            .tabulator .tabulator-header .tabulator-col .tabulator-header-filter input:focus {
                outline: none;
                border-color: #4f46e5;
                box-shadow: 0 0 0 1px #4f46e5;
            }
        }

        /* Enhanced font rendering for better clarity */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            letter-spacing: -0.025em;
        }

        .tabulator {
            font-family: inherit;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Improved filter input styling */
        .tabulator .tabulator-header .tabulator-col .tabulator-header-filter input {
            width: 100%;
            padding: 0.375rem 0.5rem;
            font-size: 0.8125rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            background-color: white;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .tabulator .tabulator-header .tabulator-col .tabulator-header-filter input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1);
        }

        .tabulator .tabulator-header .tabulator-col .tabulator-header-filter input::placeholder {
            color: #9ca3af;
            font-size: 0.75rem;
        }

        /* Quick Filter Buttons Styling */
        .quick-filter-btn {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db;
            background-color: #ffffff;
            color: #374151;
            transition: all 0.15s ease-in-out;
            cursor: pointer;
            text-decoration: none;
        }

        .quick-filter-btn:hover {
            background-color: #f9fafb;
            border-color: #9ca3af;
            color: #111827;
        }

        .quick-filter-btn.active {
            background-color: #3b82f6;
            border-color: #3b82f6;
            color: #ffffff;
        }

        .quick-filter-btn.active:hover {
            background-color: #2563eb;
            border-color: #2563eb;
        }

        .quick-filter-btn i {
            font-size: 0.75rem;
        }

        /* Pagination alignment */
        .tabulator .tabulator-footer {
            text-align: left;
        }

        .tabulator .tabulator-footer .tabulator-paginator {
            text-align: left;
            float: none;
        }
    </style>
</head>
<body class="bg-slate-50 flex flex-col min-h-screen">
    <!-- Minimalistic Header -->
    <header class="bg-white border-b-2 border-black">
        <div class="max-w-7xl mx-auto flex flex-col items-center gap-1 py-3 px-4">
            <h1 class="text-xl md:text-2xl font-bold text-gray-900 text-center">
                Fund Portfolio Holding Analytics
            </h1>
            <span class="text-base md:text-lg text-gray-700 font-medium text-center">
                India Top MidCap Funds - May 2025 vs August 2025
            </span>
        </div>
    </header>

    <!-- Charts Section -->
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 py-2">
        <div class="max-w-7xl mx-auto px-2">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                <!-- Chart 1: Top Holdings -->
                <div class="bg-white rounded-lg p-2 border border-gray-200 shadow-sm">
                    <h4 class="text-base font-semibold text-gray-700 mb-1">Top 5 Holdings (Aug %)</h4>
                    <div class="h-40">
                        <canvas id="topHoldingsChart"></canvas>
                    </div>
                </div>

                <!-- Chart 2: Top Bullish/Bearish -->
                <div class="bg-white rounded-lg p-3 border border-gray-200 shadow-sm">
                    <div class="h-40 grid grid-cols-2 gap-3 text-base">
                        <div class="">
                            <div class="font-semibold text-green-700 mb-3">ðŸ“ˆ Top Bullish</div>
                            <div class="space-y-1.5 text-green-600 font-semibold">
                                <div>â€¢ Zomato</div>
                                <div>â€¢ Trent</div>
                                <div>â€¢ One 97</div>
                                <div>â€¢ Vishal Mega</div>
                                <div>â€¢ Kaynes Tech</div>
                            </div>
                        </div>
                        <div class="">
                            <div class="font-semibold text-red-700 mb-3">ðŸ“‰ Top Bearish</div>
                            <div class="space-y-1.5 text-red-600 font-semibold">
                                <div>â€¢ Solar Ind.</div>
                                <div>â€¢ Indian Hotels</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart 3: Fund Comparison -->
                <div class="bg-white rounded-lg p-2 border border-gray-200 shadow-sm">
                    <h4 class="text-base font-semibold text-gray-700 mb-1">Fund Market Values (â‚¹ Cr)</h4>
                    <div class="h-40">
                        <canvas id="fundComparisonChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Description Section -->
    <div class="bg-indigo-50 border-b border-indigo-100 py-2">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                <div class="md:col-span-3 bg-white rounded-lg p-3 border border-indigo-200">
                    <h3 class="text-lg font-semibold text-indigo-900 mb-2">About This Analysis</h3>
                    <p class="text-sm font-medium text-gray-700 mb-2">
                        This dashboard compares mutual fund holding changes across two periods, analyzing how top midcap funds are positioning their portfolios.
                    </p>
                    <p class="text-sm font-medium text-gray-600">
                        <strong>Coverage:</strong> Top 5 midcap Category 1 mutual funds - Axis, HDFC, Nippon, Motilal Oswal, and Kotak midcap schemes. Data aggregated for May and August 2025 comparison. See methodology note at the end for details.
                    </p>
                </div>
                <div class="md:col-span-2 bg-white rounded-lg p-3 border border-indigo-200">
                    <h3 class="text-lg font-semibold text-indigo-900 mb-2">Data Processing Tools</h3>
                    <div class="space-y-1">
                        <a href="https://app.tigzig.com/mf-files-ai" target="_blank"
                           class="inline-flex items-center text-base font-semibold text-blue-600 hover:text-blue-800 hover:underline">
                            <i class="fas fa-robot mr-2"></i>
                            AI Powered MF Portfolio File Processor
                        </a>
                        <br>
                        <a href="https://app.tigzig.com/gpt-mf-holding-analyzer" target="_blank" class="inline-flex items-center text-base font-semibold text-green-600 hover:text-green-800 hover:underline">
                            <i class="fas fa-brain mr-2"></i>
                            Custom GPT - Data Processing & Cleaning (Step 2)
                        </a>
                    </div>
                    <p class="text-sm font-medium text-gray-500 mt-2">Tools used to convert, clean, and structure the data for this dashboard</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="max-w-7xl mx-auto px-4 pt-3 pb-4 flex-grow" style="background-color: #ffffff;">

        <!-- Main Dashboard Card -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4">

            <!-- Table Description -->
            <div class="mb-4">
                <h3 class="text-lg font-semibold text-indigo-900 mb-2">Advanced Interactive Data Table : Filtering, Sorting & Quick Cuts</h3>
            </div>

            <!-- Quick Analysis Buttons -->
            <div class="mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                <div class="flex flex-wrap gap-2 items-center">
                    <span class="text-sm font-medium text-gray-700 mr-2">Quick Analysis:</span>
                    <button id="topholdingsaugBtn" class="quick-filter-btn" data-filter="top-holdings-aug">
                        <i class="fas fa-trophy mr-1"></i>Top Holdings
                    </button>
                    <button id="topholdingsmayBtn" class="quick-filter-btn" data-filter="top-holdings-may">
                        <i class="fas fa-medal mr-1"></i>Top Holdings - May
                    </button>
                    <button id="increaseBtn" class="quick-filter-btn" data-filter="increase">
                        <i class="fas fa-arrow-up mr-1"></i>Holdings Up
                    </button>
                    <button id="decreaseBtn" class="quick-filter-btn" data-filter="decrease">
                        <i class="fas fa-arrow-down mr-1"></i>Holdings Down
                    </button>
                    <button id="newentriesBtn" class="quick-filter-btn" data-filter="new-entries">
                        <i class="fas fa-plus mr-1"></i>Entry
                    </button>
                    <button id="exitsBtn" class="quick-filter-btn" data-filter="exits">
                        <i class="fas fa-minus mr-1"></i>Exit
                    </button>
                    <button id="clearFiltersBtn" class="quick-filter-btn" data-filter="clear">
                        <i class="fas fa-times mr-1"></i>Clear Filters
                    </button>
                </div>
            </div>

            <!-- Data Table Container -->
            <div class="overflow-hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-3 gap-3">
                    <div>
                        <p class="text-sm text-blue-600 font-medium mb-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Note: Market value amounts are displayed in â‚¹ Lakhs
                        </p>
                        <p class="text-gray-600 text-sm font-medium">
                            ðŸ’¡ <strong>Filter Tips:</strong> For numeric columns, use operators like <code>&gt; 100</code>, <code>&lt; 500</code>, <code>= 200</code>, or <code>between 100 and 500</code>
                        </p>
                    </div>
                    <div class="flex gap-2">
                        <button id="legendBtn"
                                class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 font-medium rounded border border-gray-300 shadow-sm hover:bg-gray-200 hover:border-gray-400 transition-colors text-sm">
                            <i class="fas fa-question-circle mr-1.5 text-xs"></i>
                            Column Legend
                        </button>
                        <button id="exportBtn"
                                class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 font-medium rounded border border-gray-300 shadow-sm hover:bg-gray-200 hover:border-gray-400 transition-colors text-sm">
                            <i class="fas fa-download mr-1.5 text-xs"></i>
                            Export Data Table
                        </button>
                        <a href="#" target="_blank"
                           class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 font-medium rounded border border-gray-300 shadow-sm hover:bg-gray-200 hover:border-gray-400 transition-colors text-sm">
                            <i class="fas fa-database mr-1.5 text-xs"></i>
                            Export Raw Data
                        </a>
                    </div>
                </div>
                <div id="pagination-controls" class="mb-3"></div>
                <div class="w-full overflow-x-auto">
                    <div id="data-table" class="min-w-max"></div>
                </div>
            </div>
        </div>
        
        <!-- Methodology Notes and Disclaimer -->
        <div class="space-y-4">
            <!-- Methodology Notes -->
            <div class="bg-blue-50 rounded-xl shadow-sm border border-blue-200 p-4">
                <h2 class="text-lg font-semibold mb-3 text-blue-800">Methodology Notes</h2>
                <div class="text-blue-800 text-sm">
                    <ul class="list-disc pl-4 space-y-2">
                        <li>Funds taken for analysis: Motilal Oswal Midcap Fund, HDFC Mid-Cap Opportunities Fund, Kotak Midcap Fund, Nippon India Growth Mid Cap Fund, Axis Midcap Fund</li>
                        <li>Methodology - Portfolio Holdings Excel to CSV conversion : See Docs page in the MF Portfolio Conversion App</li>
                        <li>Methodology - Analytics Data Table - Refer to the MF Holding Processer GPT Docs page at link above.</li>
                        <li>During data cleaning, similar looking names in ISINs have been merged, especially in cases where stock splits, bonuses, and corporate actions occur. Judgment calls have been made to clean that up. However, the raw table contains the original data before preprocessing.</li>
                    </ul>
                </div>
            </div>

            <!-- Disclaimer -->
            <div class="bg-amber-50 rounded-xl shadow-sm border border-amber-200 p-4">
                <h2 class="text-lg font-semibold mb-3 text-amber-800">Disclaimer</h2>
                <div class="text-amber-800 text-sm">
                    <ul class="list-disc pl-4 space-y-2">
                        <li>This dashboard is for educational purposes and does not constitute investment advice.</li>
                        <li>This dashboard has been prepared with due care using publicly available data. While every effort has been made to ensure accuracy, no guarantee is made as to completeness or absolute accuracy, and users should validate findings independently.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
        
    <!-- Professional Footer -->
    <footer class="bg-white/50 border-t border-indigo-100 py-2 mt-4 text-xs text-indigo-950/70">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-1">
                <div class="text-xs text-indigo-950/70 text-center md:text-left">
                    Amar Harolikar <span class="mx-1.5 text-indigo-300">â€¢</span>
                    <a href="https://www.linkedin.com/in/amarharolikar" target="_blank"
                        class="text-indigo-600 hover:text-indigo-700 hover:underline">
                        <i class="fab fa-linkedin mr-1"></i>LinkedIn
                    </a>
                    <span class="mx-1.5 text-indigo-300">â€¢</span>
                    Decision Sciences & Applied AI <span class="mx-1.5 text-indigo-300">â€¢</span>
                    <a href="mailto:amar@harolikar.com" class="text-indigo-600 hover:text-indigo-700 hover:underline">
                        <i class="fas fa-envelope mr-1"></i>amar@harolikar.com
                    </a>
                </div>
                <div class="flex items-center gap-4 text-xs">
                    <a href="https://tigzig.com" target="_blank"
                        class="text-indigo-600 hover:text-indigo-700 hover:underline">
                        <i class="fas fa-globe mr-1"></i>Tigzig
                    </a>
                    <a href="https://tigzig.com/privacy" target="_blank"
                        class="text-indigo-600 hover:text-indigo-700 hover:underline">
                        <i class="fas fa-shield-alt mr-1"></i>Privacy
                    </a>
                    <a href="https://tigzig.com/terms" target="_blank"
                        class="text-indigo-600 hover:text-indigo-700 hover:underline">
                        <i class="fas fa-file-contract mr-1"></i>Terms
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Data and App Scripts -->
    <!-- DATA_PLACEHOLDER -->
    <!-- APP_PLACEHOLDER -->
</body>
</html>
